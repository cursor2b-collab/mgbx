# ğŸ”§ æ»‘å—å¹³æ»‘æ»‘åŠ¨ä¿®å¤

## ğŸ› é—®é¢˜æè¿°

ç”¨æˆ·åé¦ˆï¼šæ»‘å—ä»ç„¶"è·³"åˆ°ä¸‹ä¸€ä¸ªæŒ‰é’®ï¼Œè€Œä¸æ˜¯å¹³æ»‘æ»‘åŠ¨

## ğŸ’¡ é—®é¢˜åŸå› 

ä¹‹å‰çš„å®ç°ä½¿ç”¨ **inline style** ç›´æ¥è®¾ç½® `width` å’Œ `transform`ï¼š

```jsx
style={{
  width: `${gliderStyle.width}px`,
  transform: gliderStyle.transform
}}
```

**é—®é¢˜**ï¼šinline style ä¼šç«‹å³åº”ç”¨ï¼Œè·³è¿‡CSS transitionï¼

å³ä½¿CSSä¸­å®šä¹‰äº†ï¼š
```css
.glider-mobile.glider-animated {
    transition: transform 0.5s ...;
}
```

ä½† inline style çš„ä¼˜å…ˆçº§æ›´é«˜ï¼Œä¼šç›´æ¥è¦†ç›–ï¼Œå¯¼è‡´æ²¡æœ‰è¿‡æ¸¡åŠ¨ç”»ã€‚

## âœ… è§£å†³æ–¹æ¡ˆ

ä½¿ç”¨ **CSSè‡ªå®šä¹‰å±æ€§ï¼ˆCSS Variablesï¼‰** + **@property** æ³¨å†Œ

### æ­¥éª¤1ï¼šæ³¨å†Œå¯åŠ¨ç”»çš„CSSå˜é‡

åœ¨CSSä¸­æ·»åŠ ï¼š
```css
@property --glider-x {
    syntax: '<length>';
    inherits: false;
    initial-value: 0px;
}

@property --glider-width {
    syntax: '<length>';
    inherits: false;
    initial-value: 0px;
}
```

**å…³é”®**ï¼š`@property` è®©CSSå˜é‡å¯ä»¥å‚ä¸transitionï¼

### æ­¥éª¤2ï¼šåœ¨CSSä¸­ä½¿ç”¨å˜é‡

```css
.glider-mobile {
    width: var(--glider-width);
    transform: translateX(var(--glider-x)) translateY(-50%);
}
```

### æ­¥éª¤3ï¼šæ·»åŠ transitionåˆ°å˜é‡

```css
.glider-mobile.glider-animated {
    transition: 
        --glider-x 0.5s cubic-bezier(0.47, 1.64, 0.41, 0.8),
        --glider-width 0.5s cubic-bezier(0.47, 1.64, 0.41, 0.8),
        background 0.5s ease-in-out,
        box-shadow 0.5s ease-in-out,
        opacity 0.3s ease-out;
}
```

### æ­¥éª¤4ï¼šReactä¸­è®¾ç½®CSSå˜é‡

```jsx
style={{
  '--glider-width': `${gliderStyle.width}px`,
  '--glider-x': `${left}px`
} as React.CSSProperties}
```

## ğŸ¬ å·¥ä½œåŸç†

### æ—§æ–¹æ¡ˆï¼ˆç›´æ¥è®¾ç½®ï¼Œæ— åŠ¨ç”»ï¼‰
```
ç‚¹å‡»æŒ‰é’®
  â†“
setGliderStyle({ transform: 'translateX(100px)' })
  â†“
Reactæ¸²æŸ“: <span style="transform: translateX(100px)">
  â†“
æµè§ˆå™¨ï¼šç«‹å³åº”ç”¨ âŒ (è·³è·ƒ)
```

### æ–°æ–¹æ¡ˆï¼ˆCSSå˜é‡ï¼Œæœ‰åŠ¨ç”»ï¼‰
```
ç‚¹å‡»æŒ‰é’®
  â†“
setGliderStyle({ ... })
  â†“
Reactæ¸²æŸ“: <span style="--glider-x: 100px">
  â†“
CSS: transform: translateX(var(--glider-x))
  â†“
CSS: transition: --glider-x 0.5s cubic-bezier(...)
  â†“
æµè§ˆå™¨ï¼šå¹³æ»‘è¿‡æ¸¡ âœ… (æ»‘åŠ¨)
```

## ğŸ“‹ éªŒè¯æ­¥éª¤

### 1. æ‰“å¼€å¼€å‘è€…å·¥å…·æ§åˆ¶å°

åº”è¯¥çœ‹åˆ°æ—¥å¿—ï¼š
```
ğŸ¯ æ»‘å—ç§»åŠ¨: ç´¢å¼•=0, å®½åº¦=80px, ä½ç½®=0px
```

### 2. ç‚¹å‡»ä¸åŒæŒ‰é’®

è§‚å¯Ÿæ§åˆ¶å°è¾“å‡ºï¼š
```
ğŸ¯ æ»‘å—ç§»åŠ¨: ç´¢å¼•=1, å®½åº¦=80px, ä½ç½®=90px
ğŸ¯ æ»‘å—ç§»åŠ¨: ç´¢å¼•=2, å®½åº¦=80px, ä½ç½®=180px
```

### 3. è§‚å¯Ÿæ»‘å—åŠ¨ç”»

- âœ… æ»‘å—åº”è¯¥**å¹³æ»‘æ»‘åŠ¨**åˆ°æ–°ä½ç½®
- âœ… æœ‰**è½»å¾®å›å¼¹**æ•ˆæœï¼ˆè¶…è¿‡ç›®æ ‡å†å›æ¥ï¼‰
- âœ… åŠ¨ç”»æŒç»­çº¦**500ms**
- âœ… **æ¶²æ€æµåŠ¨**çš„æ„Ÿè§‰

### 4. æ£€æŸ¥CSSå˜é‡

åœ¨Elementsé¢æ¿ â†’ Computedæ ·å¼ï¼š
```css
--glider-x: 90px;
--glider-width: 80px;
transform: translateX(90px) translateY(-50%);
width: 80px;
```

### 5. æ£€æŸ¥transition

åœ¨Elementsé¢æ¿ â†’ Computedæ ·å¼ï¼š
```css
transition: 
  --glider-x 0.5s cubic-bezier(0.47, 1.64, 0.41, 0.8) 0s,
  --glider-width 0.5s cubic-bezier(0.47, 1.64, 0.41, 0.8) 0s,
  ...
```

## ğŸ” æ•…éšœæ’é™¤

### é—®é¢˜1ï¼šä»ç„¶è·³è·ƒï¼Œæ²¡æœ‰åŠ¨ç”»

**æ£€æŸ¥**ï¼šæµè§ˆå™¨æ˜¯å¦æ”¯æŒ `@property`

**è§£å†³**ï¼š
- Chrome 85+
- Edge 85+
- Safari 15.4+
- Firefox æš‚ä¸æ”¯æŒï¼ˆéœ€è¦é™çº§æ–¹æ¡ˆï¼‰

**é™çº§æ–¹æ¡ˆ**ï¼ˆå¦‚æœéœ€è¦æ”¯æŒFirefoxï¼‰ï¼š
ä½¿ç”¨GSAPæˆ–Framer Motionåº“æ¥åšåŠ¨ç”»

### é—®é¢˜2ï¼šæ§åˆ¶å°æ²¡æœ‰æ—¥å¿—

**åŸå› **ï¼šç»„ä»¶æ²¡æœ‰é‡æ–°æ¸²æŸ“

**è§£å†³**ï¼šç¡¬åˆ·æ–°ï¼ˆCtrl+Shift+Rï¼‰

### é—®é¢˜3ï¼šCSSå˜é‡æ²¡æœ‰ç”Ÿæ•ˆ

**æ£€æŸ¥**ï¼šElements â†’ Stylesï¼Œæ˜¯å¦çœ‹åˆ°ï¼š
```css
element.style {
    --glider-x: 90px;
    --glider-width: 80px;
}
```

**è§£å†³**ï¼šç¡®ä¿ `as React.CSSProperties` ç±»å‹è½¬æ¢

### é—®é¢˜4ï¼š@propertyä¸æ”¯æŒ

**é™çº§æ–¹æ¡ˆ**ï¼šä½¿ç”¨FLIPåŠ¨ç”»æŠ€æœ¯

```typescript
// è®°å½•æ—§ä½ç½®
const oldRect = element.getBoundingClientRect();

// æ›´æ–°DOM
setGliderStyle(...);

// è®°å½•æ–°ä½ç½®
requestAnimationFrame(() => {
  const newRect = element.getBoundingClientRect();
  const deltaX = oldRect.left - newRect.left;
  
  // ä½¿ç”¨transformä»æ—§ä½ç½®åŠ¨ç”»åˆ°æ–°ä½ç½®
  element.animate([
    { transform: `translateX(${deltaX}px)` },
    { transform: 'translateX(0)' }
  ], {
    duration: 500,
    easing: 'cubic-bezier(0.47, 1.64, 0.41, 0.8)'
  });
});
```

## ğŸ¨ è§†è§‰æ•ˆæœ

### é¢„æœŸæ•ˆæœ
```
é¦–é¡µ â†’ ç‚¹å‡»"è¡Œæƒ…"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â•­â”€â”€â”€â”€â”€â”€â•®â”‚        â”‚        â”‚        â”‚
â”‚â”‚ é¦–é¡µ â”‚â”‚  è¡Œæƒ…  â”‚  äº¤æ˜“  â”‚  èµ„äº§  â”‚
â”‚â•°â”€â”€â”€â”€â”€â”€â•¯â”‚        â”‚        â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    æ»‘å—å¼€å§‹ç§»åŠ¨ â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â•­â”€â”€â”€â”€â”¼â”€â”€â”€â•®    â”‚        â”‚        â”‚
â”‚   â”‚ é¦–é¡µâ”‚è¡Œæƒ…â”‚   â”‚  äº¤æ˜“  â”‚  èµ„äº§  â”‚
â”‚   â•°â”€â”€â”€â”€â”¼â”€â”€â”€â•¯    â”‚        â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ç»§ç»­æ»‘åŠ¨ â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        â”‚â•­â”€â”€â”€â”€â”€â”€â•®â”‚        â”‚        â”‚
â”‚  é¦–é¡µ  â”‚â”‚ è¡Œæƒ… â”‚â”‚  äº¤æ˜“  â”‚  èµ„äº§  â”‚
â”‚        â”‚â•°â”€â”€â”€â”€â”€â”€â•¯â”‚        â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    è½»å¾®è¶…è°ƒï¼ˆå›å¼¹ï¼‰ â†“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        â”‚  â•­â”€â”€â”€â”€â”¼â”€â•®       â”‚        â”‚
â”‚  é¦–é¡µ  â”‚  â”‚è¡Œæƒ…â”‚äº¤â”‚  æ˜“  â”‚  èµ„äº§  â”‚
â”‚        â”‚  â•°â”€â”€â”€â”€â”¼â”€â•¯       â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    å›åˆ°å‡†ç¡®ä½ç½® âœ…

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        â”‚â•­â”€â”€â”€â”€â”€â”€â•®â”‚        â”‚        â”‚
â”‚  é¦–é¡µ  â”‚â”‚ è¡Œæƒ… â”‚â”‚  äº¤æ˜“  â”‚  èµ„äº§  â”‚
â”‚        â”‚â•°â”€â”€â”€â”€â”€â”€â•¯â”‚        â”‚        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### åŠ¨ç”»æ—¶é—´çº¿
```
0ms     â†’ ç‚¹å‡»"è¡Œæƒ…"
16ms    â†’ Reactæ›´æ–°CSSå˜é‡ --glider-x
16ms    â†’ CSSå¼€å§‹transition
100ms   â†’ å¿«é€ŸåŠ é€Ÿ
300ms   â†’ é«˜é€Ÿç§»åŠ¨
400ms   â†’ è¶…è¿‡ç›®æ ‡ 16%ï¼ˆå›å¼¹å³°å€¼ï¼‰
480ms   â†’ å›åˆ°å‡†ç¡®ä½ç½®
500ms   â†’ å®Œå…¨åœæ­¢ âœ…
```

## ğŸ’» ä»£ç å¯¹æ¯”

### ä¿®å¤å‰
```tsx
// âŒ ç›´æ¥è®¾ç½®inline styleï¼Œæ— åŠ¨ç”»
<span 
  style={{
    width: `${gliderStyle.width}px`,
    transform: gliderStyle.transform
  }}
></span>
```

```css
/* CSS transition è¢«inline styleè¦†ç›– */
.glider-mobile.glider-animated {
    transition: transform 0.5s ...; /* æ— æ•ˆï¼âŒ */
}
```

### ä¿®å¤å
```tsx
// âœ… ä½¿ç”¨CSSå˜é‡ï¼Œæœ‰åŠ¨ç”»
<span 
  style={{
    '--glider-width': `${gliderStyle.width}px`,
    '--glider-x': `${left}px`
  } as React.CSSProperties}
></span>
```

```css
/* CSSå˜é‡æ³¨å†Œä¸ºå¯åŠ¨ç”» */
@property --glider-x {
    syntax: '<length>';
    inherits: false;
    initial-value: 0px;
}

/* CSSä½¿ç”¨å˜é‡ + transition */
.glider-mobile {
    transform: translateX(var(--glider-x)) translateY(-50%);
}

.glider-mobile.glider-animated {
    transition: --glider-x 0.5s cubic-bezier(...); /* ç”Ÿæ•ˆï¼âœ… */
}
```

## ğŸ¯ å…³é”®è¦ç‚¹

1. **@property æ˜¯å…³é”®**
   - è®©CSSå˜é‡å¯ä»¥å‚ä¸åŠ¨ç”»
   - å¿…é¡»æŒ‡å®š `syntax: '<length>'`
   - å¿…é¡»è®¾ç½®åˆå§‹å€¼

2. **transitionåº”ç”¨åˆ°CSSå˜é‡**
   ```css
   transition: --glider-x 0.5s ...;
   ```
   è€Œä¸æ˜¯ï¼š
   ```css
   transition: transform 0.5s ...;
   ```

3. **Reactè®¾ç½®CSSå˜é‡å€¼**
   ```jsx
   style={{ '--glider-x': '100px' }}
   ```
   è€Œä¸æ˜¯ï¼š
   ```jsx
   style={{ transform: 'translateX(100px)' }}
   ```

4. **CSSè¯»å–å˜é‡å¹¶åº”ç”¨transform**
   ```css
   transform: translateX(var(--glider-x));
   ```

## ğŸŒŸ ä¼˜åŠ¿

### æ€§èƒ½
- âœ… GPUåŠ é€Ÿï¼ˆtransformï¼‰
- âœ… æ— layout reflow
- âœ… 60fpsæµç•…

### å¯ç»´æŠ¤æ€§
- âœ… é€»è¾‘åˆ†ç¦»ï¼ˆReactæ§åˆ¶å€¼ï¼ŒCSSæ§åˆ¶åŠ¨ç”»ï¼‰
- âœ… æ˜“äºè°ƒæ•´ç¼“åŠ¨å‡½æ•°
- âœ… æ”¯æŒå¤šä¸ªåŠ¨ç”»å±æ€§

### å…¼å®¹æ€§
- âœ… Chrome 85+ï¼ˆ2020å¹´8æœˆï¼‰
- âœ… Edge 85+
- âœ… Safari 15.4+ï¼ˆ2022å¹´3æœˆï¼‰
- âš ï¸ Firefox éœ€è¦é™çº§æ–¹æ¡ˆ

## ğŸ“š å‚è€ƒèµ„æ–™

### CSS @property
https://developer.mozilla.org/en-US/docs/Web/CSS/@property

### CSSè‡ªå®šä¹‰å±æ€§åŠ¨ç”»
https://web.dev/at-property/

### Can I Use @property
https://caniuse.com/mdn-css_at-rules_property

---

**ä¿®å¤çŠ¶æ€**ï¼šâœ… å·²å®Œæˆ  
**æµ‹è¯•çŠ¶æ€**ï¼šå¾…éªŒè¯  
**é¢„æœŸæ•ˆæœ**ï¼šå¹³æ»‘æ»‘åŠ¨ + å›å¼¹åŠ¨ç”»  
**æµè§ˆå™¨è¦æ±‚**ï¼šChrome 85+ / Safari 15.4+
